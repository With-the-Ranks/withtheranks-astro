---
import Layout from "../layouts/Layout.astro";
import Button from "../components/Button.astro";
import "animate.css";
---

<Layout title="With the Ranks">
	<!-- TODO: Move to component -->
	<nav
		class="max-w-screen-2xl w-10/12 mx-auto pt-10 animate__animated animate__fadeIn animate__delay-2s"
	>
		<div class="flex justify-between">
			<ul class="flex">
				<li class="inline-block">
					<a href="/">Home</a>
				</li>
				<li class="inline-block"><a href="/work">Our Work</a></li>
				<li class="inline-block"><a href="/blog">Blog</a></li>
			</ul>
			<button id="theme-toggle" class="theme-toggle-button">
				<i class="fas fa-moon"></i> <!-- Default icon -->
			</button>
		</div>
	</nav>

	<main class="animate__animated animate__fadeIn animate__slow py-20 md:py-40">
		<div class="debug hidden" id="color_picker">
			<label for="favcolor">Logo colors:</label>
			<input type="color" data-stop-id="stop_one" />
			<input type="color" data-stop-id="stop_two" />
		</div>

		<header class="max-w-screen-2xl w-11/12 md:w-10/12 mx-auto relative z-0">
			<!-- Logo -->
			<svg
				fill="none"
				viewBox="0 0 1359 616"
				xmlns="http://www.w3.org/2000/svg"
				class="logo"
			>
				<path
					d="m109.2 295.26 68.031-196.23 63.965 196.23h3.081l59.404-198.44c13.681-45.454 26.498-69.843 43.968-74.647v-2.2172h-63.687v2.2172c25.512 4.8041 25.882 27.716 12.571 72.43l-31.058 104.95-45.354-142.27c-6.656-21.064 0-33.628 21.814-35.106v-2.2172h-107.59v2.2172c14.42 1.4782 22.923 15.151 32.537 45.084l6.655 21.064-40.301 117.51-45.848-148.56c-6.1623-20.694 0.3697-33.628 20.336-35.106v-2.2172h-107.22v2.2172c15.406 1.4782 24.403 15.151 33.646 45.084l72.099 227.88 2.958 0.124z"
					fill="url(#logoGradient)"></path>
				<path
					d="m387.98 66.518c5.797-0.0365 11.455-1.7859 16.26-5.0281 4.805-3.2421 8.544-7.8322 10.746-13.193s2.768-11.252 1.628-16.934c-1.14-5.6817-3.936-10.899-8.035-14.997-4.1-4.0975-9.32-6.8918-15.005-8.0312s-11.579-0.57325-16.943 1.6274c-5.363 2.2006-9.956 5.9374-13.2 10.74s-4.994 10.457-5.03 16.252c-0.029 3.8903 0.716 7.7475 2.193 11.347 1.476 3.5997 3.654 6.8701 6.406 9.6211 2.752 2.7509 6.025 4.9274 9.626 6.403 3.602 1.4755 7.461 2.2206 11.354 2.1919z"
					fill="url(#logoGradient)"></path>
				<path
					d="m416.08 91.646h-1.479l-69.017 16.137v2.217c12.571 4.435 18.856 11.086 18.856 34.737v105.81c0 23.651-1.109 36.215-16.268 36.215v2.218h84.3v-2.218c-15.159 0-16.268-12.564-16.268-36.215l-0.124-158.9z"
					fill="url(#logoGradient)"></path>
				<path
					d="m469.33 241.31c0 36.954 17.748 52.105 47.696 52.105 22.924 0 47.697-14.782 65.444-37.324l-2.219-1.478c-9.613 7.761-22.184 14.782-33.276 14.782-16.638 0-25.881-9.608-25.881-28.824v-128.6h84.669v138.58c0 23.651-1.109 36.215-16.268 36.215v2.218h84.3v-2.218c-15.159 0-16.268-12.564-16.268-36.215v-120.47c10.538-6.675 22.632-10.495 35.094-11.087 24.033 0 28.5 17.369 28.5 42.867v88.69c0 23.651-1.14 36.215-16.299 36.215v2.218h84.454v-2.218c-15.159 0-16.268-12.564-16.268-36.215v-101.99c0-36.954-16.269-57.649-48.066-57.649-25.111 0-48.775 16.999-67.261 35.476v-126.38h-1.479l-69.295 13.304v2.0941c12.571 4.4345 18.856 11.086 18.856 34.737v45.33h-84.546v-55.185h-2.219c-18.117 36.215-37.343 51.736-63.594 63.931l-5.177 2.587v5.173h19.227l-0.124 129.34z"
					fill="url(#logoGradient)"></path>
				<path
					d="m580.77 517.54c-9.613-18.477-19.226-32.15-29.948-38.432v-0.739c34.755-8.869 59.527-32.15 59.527-67.75 0-42.866-31.427-69.073-93.913-69.073h-112.31v2.217c25.142 0 26.621 18.477 26.621 45.793v173.07c0 27.346-1.479 45.823-26.621 45.823v2.218h108.7v-2.218c-25.142 0-27.36-18.477-27.36-45.823v-80.067h8.873c11.832 0 15.899 3.326 21.815 15.89 45.108 104.7 51.763 113.94 82.081 113.94 12.941 0 35.865-0.739 43.136-1.478v-2.217c-15.128-5.112-21.783-17.615-60.606-91.154zm-73.947-41.019h-21.568v-115.67c0-8.838 5.176-13.272 14.05-13.272h7.765c32.536 0 47.326 27.715 47.326 67.226 0.123 40.649-16.885 61.713-47.573 61.713z"
					fill="url(#logoGradient)"></path>
				<path
					d="m796.7 591.82c-11.462 0-11.462-11.456-11.462-26.607v-87.581c0-40.281-22.184-65.04-61.376-65.04-17.884-0.175-35.341 5.459-49.744 16.056s-24.973 25.582-30.119 42.701l2.218 1.109c10.353-19.955 28.839-36.585 52.379-36.585 35.865 0 35.865 38.433 35.865 48.78v22.911l-33.646 9.239c-43.629 12.318-63.965 31.041-63.965 58.511 0 24.02 17.748 40.033 43.629 40.033 21.568 0 43.136-12.934 56.2-30.795 1.109 13.304 6.656 30.795 31.058 30.795 24.403 0 40.055-18.477 45.848-29.933l-2.219-1.478c-1.72 2.306-3.924 4.206-6.458 5.568s-5.336 2.153-8.208 2.316zm-62.116-10.347c-7.025 6.159-16.638 11.086-24.649 11.086-13.68 0-24.403-11.825-24.403-31.781 0-21.803 7.025-32.519 33.893-42.497l15.159-5.543v68.735z"
					fill="url(#logoGradient)"></path>
				<path
					d="m1000.8 572.24v-101.99c0-36.955-16.266-57.649-48.063-57.649-25.142 0-48.805 16.999-67.292 35.476v-34.737h-1.479l-69.141 16.26v2.217c12.571 4.435 18.857 11.087 18.857 34.737v105.69c0 23.651-1.11 36.215-16.269 36.215v2.217h84.3v-2.217c-15.159 0-16.268-12.564-16.268-36.215v-120.47c10.548-6.678 22.653-10.499 35.125-11.087 24.033 0 28.47 17.369 28.47 42.867v88.69c0 23.651-1.11 36.215-16.269 36.215v2.217h84.299v-2.217c-15.19 0-16.27-12.564-16.27-36.215z"
					fill="url(#logoGradient)"></path>
				<path
					d="m1141.7 477.32c33.28-31.781 63.97-55.801 77.03-58.018v-2.218h-73.95v2.218c1.99 0.027 3.95 0.449 5.77 1.24 1.83 0.792 3.47 1.937 4.85 3.369 1.37 1.433 2.45 3.124 3.17 4.976 0.71 1.852 1.06 3.827 1 5.812 0 12.318-8.13 24.636-23.66 40.034l-33.28 32.519c44 86.843 52.14 104.95 84.67 104.95 12.17 0.142 24.34-0.372 36.45-1.54v-2.217c-9.24-2.956-33.24-40.649-82.05-131.12z"
					fill="url(#logoGradient)"></path>
				<path
					d="m1094.7 572.24v-247.28c0.82-6.097 2.23-12.1 4.22-17.922-8.62 5.448-17.73 10.088-27.21 13.857-9.25 3.695-18.73 6.781-28.38 9.239-18.96 4.838-38.42 7.524-57.984 8.007-9.736 0.164-19.421-0.093-29.055-0.77-9.675-0.893-19.288-1.756-28.87-3.48-9.583-1.725-19.073-3.511-28.532-5.79l-29.517-7.575c-20.672-5.156-41.738-8.586-62.978-10.255-5.362-0.431-10.815-0.616-16.207-0.77s-10.877 0-16.361 0.308c-11.037 0.542-22.012 1.984-32.814 4.311-10.976 2.326-21.661 5.858-31.859 10.532-10.211 4.773-19.735 10.894-28.316 18.2-8.275 7.151-15.606 15.326-21.814 24.328-5.958 8.693-11.173 17.872-15.591 27.439 8.165-6.59 16.084-13.273 24.125-19.309 7.727-5.877 15.978-11.032 24.649-15.397 16.795-8.173 35.03-12.975 53.674-14.135 37.405-2.741 76.351 3.726 115.14 11.671l14.605 3.08c5.114 1.078 10.445 2.279 15.683 3.264 10.603 1.945 21.298 3.353 32.044 4.219 21.584 1.871 43.317 1.064 64.704-2.402 17.782-2.933 35.132-8.042 51.672-15.213 2.49 6.901 3.59 14.228 3.23 21.557v200.17c0 23.651-1.11 36.215-16.26 36.215v2.217h84.3v-2.217c-15.19 0.123-16.3-12.441-16.3-36.092z"
					fill="url(#logoGradient)"></path>
				<path
					d="m1306.6 490.2-14.42-7.76c-14.79-7.761-31.8-16.63-31.8-36.585 0-16.26 11.46-28.085 30.81-28.085 25.14 0 43.14 22.172 55.46 48.779h2.22v-44.653c-17.01-5.897-34.87-9.017-52.87-9.238-38.09 0-68.41 21.803-68.41 59.866 0 35.106 25.52 48.779 41.42 57.278l14.41 7.761c25.89 13.673 41.79 21.556 41.79 41.389 0 21.063-17.01 31.041-36.61 31.041-31.06 0-47.69-27.716-63.22-58.511h-2.22l3.33 53.584c14.05 6.159 36.97 9.977 55.09 9.977 45.47 0 76.53-24.389 76.53-63.561-0.12-35.784-26.37-47.979-51.51-61.282z"
					fill="url(#logoGradient)"></path>
				<path
					d="m122.11 551.7c-9.706 0-15.098-5.605-15.098-16.814v-75.017h30.411l3.667-9.701h-34.078v-32.119h-1.294c-10.568 21.125-21.784 30.179-36.974 37.293l-3.0812 1.509v3.079h11.215v75.448c0 21.557 10.353 30.395 27.73 30.395 13.372 0 27.73-8.622 38.175-21.772l-1.294-0.862c-5.423 4.465-12.91 8.561-19.38 8.561z"
					fill="url(#logoGradient)"></path>
				<path
					d="m151.91 532.94v1.293h49.298v-1.293c-8.842 0-9.489-7.33-9.489-21.126v-70.274c6.152-3.897 13.213-6.125 20.489-6.467 14.05 0 16.638 10.131 16.638 25.005v51.736c0 13.796-0.647 21.126-9.49 21.126v1.293h49.206v-1.293c-8.843 0-9.49-7.33-9.49-21.126v-59.496c0-21.557-9.49-33.628-28.038-33.628-14.697 0-28.501 9.916-39.285 20.694v-73.724h-0.862l-40.333 7.761v1.293c7.334 2.587 11 6.467 11 20.263v116.84c-0.154 13.796-0.832 21.126-9.644 21.126z"
					fill="url(#logoGradient)"></path>
				<path
					d="m342.04 484.56c-23.293 0-32.999-21.987-32.999-55.431v-2.155h64.704c1.294-27.716-14.666-45.269-40.979-45.269-31.92 0-54.351 26.73-54.351 61.005 0 30.795 16.823 57.125 49.298 57.125 24.156 0 37.528-14.874 46.217-30.179l-1.294-0.863c-3.438 4.911-8.02 8.913-13.35 11.66s-11.249 4.156-17.246 4.107zm-10.137-99.807c13.588 0 16.823 15.09 15.098 38.802h-37.744c0.863-19.832 7.549-38.802 22.646-38.802z"
					fill="url(#logoGradient)"></path>
				<path
					d="m360.5 611.93v-64.454l-168.38 68.334 168.38-3.88z"
					fill="url(#logoGradient)"></path>
				<defs>
					<linearGradient
						id="logoGradient"
						gradientUnits="userSpaceOnUse"
						gradientTransform="rotate(45)"
					>
						<stop
							class="stop-one"
							offset="0"
							id="stop_one"
							stop-color="var(--stop-one-color)"></stop>
						<stop
							class="stop-two"
							offset="0"
							id="stop_two"
							stop-color="var(--stop-two-color)"
						>
							<animate
								attributeName="offset"
								values="0;1"
								dur="2s"
								repeatCount="0"
								fill="freeze"></animate>
						</stop>
					</linearGradient>
				</defs>
			</svg>
		</header>

		<div class="max-w-screen-xl w-11/12 md:w-7/12 mx-auto md:-translate-y-20 pt-10">
			<h1 class="text-5xl md:text-6xl lg:text-7xl xl:text-8xl">
				We build great tech for good causes.
			</h1>

			<p>
				With the Ranks is a worker-owned cooperative focused on helping
				campaigns, non-profits and unions figure out tech.
			</p>

			<p>
				We work with folks like <a
					href="https://350.org"
					target="_blank">350.org</a
				>, <a href="https://berniesanders.org" target="_blank">Bernie Sanders</a>, <a
					href="https://ambriaforalderman.org"
					target="_blank">Ambria Taylor for Alderman</a
				>, <a href="https://uwunited.org" target="_blank"
					>Unemployed Workers United</a
				>, <a
					href="https://fightcorporatemonopolies.org"
					target="_blank">Fight Corporate Monopolies</a
				>, <a href="https://indivisible.org" target="_blank"
					>The Indivisible Project</a
				>, <a href="https://aelp.org" target="_blank"
					>American Economic Liberties Project</a
				> and more.
			</p>

			<p>
				We love building beautiful websites, developing custom
				organizing tools, running A/B testing programs, getting out the
				vote, raising money, and helping unions.
			</p>

			<p>
				We don't work for Republicans, grifters, corporations, or anyone
				else afraid to stand up for workers or the planet.
			</p>

			<p class="pb-10">
				We're always interested in learning about cool projects, whether
				you're running for city council or leading a global nonprofit.
				If you think we'd get along, let us know at
				<a href="mailto:hello@withtheranks.com&subject=Hello!"
					>hello@withtheranks.com</a
				> - we'd love to meet!
			</p>

			<Button text="Get in touch!" link="mailto:hello@withtheranks.com&subject=Hello!" />
		</div>
	</main>
</Layout>

<style>
	@media (min-width: 768px) {
		header::after {
			content: "";
			display: block;
			position: absolute;
			left: 0;
			right: 0;
			bottom: 0;
			height: 20%;
			background: linear-gradient(
				rgba(var(--main-bg-rgb), 0),
				rgba(var(--main-bg-rgb), 1) 100%
			);
			z-index: 1;
		}
	}
</style>

<script>
	// Set gradient colors based on color picker selections when in debug mode to ply with color
	const debug = true;

	if (debug) {
		const colorPicker = document.getElementById(
			"color_picker",
		) as HTMLDivElement;
		const colorInputs = colorPicker.querySelectorAll("input");
		const logoGradient = document.querySelector(
			"#logoGradient",
		) as SVGLinearGradientElement;

		colorPicker.classList.add("flex");
		colorPicker.classList.remove("hidden");

		function setColorStop(stop: SVGStopElement, color: string) {
			stop.setAttribute("stop-color", color);
		}

		colorInputs.forEach((el) => {
			el.addEventListener("change", (e: Event) => {
				const el = e.target as HTMLInputElement;
				const stopId = el.getAttribute("data-stop-id") as string;
				const colorStop = logoGradient.querySelector(
					"#" + stopId,
				) as SVGStopElement;

				setColorStop(colorStop, el.value);
			});
		});
	}

	const toggleButton = document.getElementById('theme-toggle') as HTMLButtonElement;

	function updateIcon(theme: 'light' | 'dark') {
			const toggleIcon = toggleButton.querySelector('i');

			if (theme === 'light') {
					toggleIcon?.classList.remove('fa-sun');
					toggleIcon?.classList.add('fa-moon');
			} else {
					toggleIcon?.classList.remove('fa-moon');
					toggleIcon?.classList.add('fa-sun');
			}
	}

	if (toggleButton) {
			toggleButton.addEventListener('click', () => {
					const currentTheme = document.documentElement.getAttribute('data-theme');
					const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

					document.documentElement.setAttribute('data-theme', newTheme);
					updateIcon(newTheme as 'light' | 'dark'); // Explicit type casting
			});
	}

	// Initialize icon based on current theme
	const currentTheme = document.documentElement.getAttribute('data-theme') || 'dark';
	updateIcon(currentTheme as 'light' | 'dark');
</script>
